graph TD
    subgraph Clients[Clients]
        TG[Telegram]
        HTTP[HTTP/Mobile]
        CLI[CLI]
        DISC[Discord]
    end

    subgraph Worker[Worker]
        BRAIN[Brain <br> Gatekeeper]
        SDK[Claude SDK]
        VOICE[Audio Processing]

        BRAIN <--> VOICE
        API <--> BRAIN

        BRAIN <--> SDK
    end

    subgraph Vault[Vault]
        STATE[SQLite DB]
        CONFIG[User Config<br/>MCP, Agents, Hooks]
        MEMORY[Memory]
    end

    subgraph Backup[Backup]
        SNAP[Snapshots]
    end

    subgraph Sandbox[Sandbox]
        TOOLS[Tools]
        TMP[Temporary <br> Experiments]
    end

    TG --> API
    HTTP --> API
    CLI --> API
    DISC --> API

    BRAIN <--> Vault
    BRAIN <--> Sandbox
    SDK <-.-> Vault
    Vault --> Backup
